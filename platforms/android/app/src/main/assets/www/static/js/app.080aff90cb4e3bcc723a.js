webpackJsonp([1],{0:function(e,t){},"1uuo":function(e,t){},"4L8C":function(e,t){},"5+rQ":function(e,t,n){var o=n("BdVV");function i(e){var t=/^https?\:\/\/(?:(?:(([^:@\/]*)(?::([^@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?).*$/.exec(e);return t&&t[1]}function s(e){var t=null;if(window.btoa){var n=i(e);if(n){t={name:"Authorization",value:"Basic "+window.btoa(n)}}}return t}function r(e){return-1===e.indexOf(" ")}var a=0,l={},c=function(){this._id=++a,this.onprogress=null};c.prototype.upload=function(e,t,n,a,c){if(r(t)){var d=(c=c||{}).fileKey||"file",u=c.fileName||"image.jpg",p=c.mimeType||"image/jpeg",v=c.params||{},h=c.withCredentials||!1,f=c.headers||{},_=c.httpMethod&&"PUT"===c.httpMethod.toUpperCase()?"PUT":"POST",y=s(t);y&&(t=t.replace(i(t)+"@",""),f[y.name]=y.value);var m=this,g=l[this._id]=new XMLHttpRequest;g.withCredentials=h;var w=a&&function(n,i,s){l[this._id]&&delete l[this._id];var r=new o(n,e,t,i,s);a&&a(r)};window.resolveLocalFileSystemURL(e,function(e){e.file(function(e){var i=new FileReader;i.onloadend=function(){var e=new Blob([this.result],{type:p}),i=new FormData;for(var s in i.append(d,e,u),v)v.hasOwnProperty(s)&&i.append(s,v[s]);for(var r in g.open(_,t),f)f.hasOwnProperty(r)&&g.setRequestHeader(r,f[r]);g.onload=function(){if(this.status>=200&&this.status<300){var t=new FileUploadResult;t.bytesSent=e.size,t.responseCode=this.status,t.response=this.response,delete l[m._id],n(t)}else 404===this.status?w(o.INVALID_URL_ERR,this.status,this.response):w(o.CONNECTION_ERR,this.status,this.response)},g.ontimeout=function(){w(o.CONNECTION_ERR,this.status,this.response)},g.onerror=function(){w(o.CONNECTION_ERR,this.status,this.response)},g.onabort=function(){w(o.ABORT_ERR,this.status,this.response)},g.upload.onprogress=function(e){m.onprogress&&m.onprogress(e)},g.send(i),l[m._id]||g.abort()},i.readAsArrayBuffer(e)},function(){w(o.FILE_NOT_FOUND_ERR)})},function(){w(o.FILE_NOT_FOUND_ERR)})}else a&&a(new o(o.INVALID_URL_ERR,e,t))},c.prototype.download=function(e,t,n,a,c,d){if(r(e)){var u=(d=d||{}).headers||{},p=d.withCredentials||!1,v=s(e);v&&(e=e.replace(i(e)+"@",""),u[v.name]=v.value);var h=this,f=l[this._id]=new XMLHttpRequest;f.withCredentials=p;var _=a&&function(n,i,s){if(l[h._id]&&delete l[h._id],s instanceof Blob){var r=new FileReader;r.readAsText(s),r.onloadend=function(s){var r=new o(n,e,t,i,s.target.result);a(r)}}else{var c=new o(n,e,t,i,s);a(c)}};for(var y in f.onload=function(e){var i,s,r=function(){_(o.FILE_NOT_FOUND_ERR)},a=e.target;200!==a.status&&0!==a.status||!a.response?404===a.status?_(o.INVALID_URL_ERR,a.status,a.response):_(o.CONNECTION_ERR,a.status,a.response):window.resolveLocalFileSystemURL((s=(i=t).lastIndexOf("/"),i.substring(0,s+1)),function(e){var i,s;e.getFile((s=(i=t).lastIndexOf("/"),i.substring(s+1)),{create:!0},function(e){e.createWriter(function(t){t.onwriteend=function(t){t.target.error?_(o.FILE_NOT_FOUND_ERR):(e.filesystemName=e.filesystem.name,delete l[h._id],n&&n(e))},t.onerror=function(){_(o.FILE_NOT_FOUND_ERR)},t.write(a.response)},r)},r)},r)},f.onprogress=function(e){h.onprogress&&h.onprogress(e)},f.onerror=function(){_(o.CONNECTION_ERR,this.status,this.response)},f.onabort=function(){_(o.ABORT_ERR,this.status,this.response)},f.open("GET",e,!0),u)u.hasOwnProperty(y)&&f.setRequestHeader(y,u[y]);f.responseType="blob",f.send()}else a&&a(new o(o.INVALID_URL_ERR,e,t))},c.prototype.abort=function(){this instanceof c&&l[this._id]&&(l[this._id].abort(),delete l[this._id])},e.exports=c},AVp0:function(e,t){},BdVV:function(e,t){var n=function(e,t,n,o,i,s){this.code=e||null,this.source=t||null,this.target=n||null,this.http_status=o||null,this.body=i||null,this.exception=s||null};n.FILE_NOT_FOUND_ERR=1,n.INVALID_URL_ERR=2,n.CONNECTION_ERR=3,n.ABORT_ERR=4,n.NOT_MODIFIED_ERR=5,e.exports=n},BxMG:function(e,t){e.exports={timeLine:40,version:.1,playLists:[{src:"https://www.videvo.net/videvo_files/converted/2015_04/preview/Ocean_Waves_slow_motion_videvo.mov44965.webm",title:"It_s_our_ocean",type:"video/webm",category:3},{src:"https://www.videvo.net/videvo_files/converted/2014_07/preview/IT_Sizilien_San_Vito_Lo_Capo_Steinstrand_Mond_4k.mov54542.webm",title:"Sergey",type:"video/webm",category:2},{src:"https://www.videvo.net/videvo_files/converted/2014_10/preview/Rocky_Coastline_3__Videvo.mov65840.webm",title:"Ocean2",type:"video/webm",category:2},{src:"https://www.videvo.net/videvo_files/converted/2017_08/preview/170724_37_Flyingoversurf.mp422204.webm",title:"Ocean_3",type:"video/webm",category:2},{src:"http://94.250.248.196/files/fon/spring3.mp4",title:"Video1",type:"video/mp4",category:3},{src:"http://94.250.248.196/files/fon/spring1.mp4",title:"Video3",type:"video/mp4",category:3}],adverst:[{src:"http://94.250.248.196/files/rec/poolgym.mp4",title:"CU",type:"video/mp4",category:2},{src:"http://94.250.248.196/files/rec/revolution.mp4",title:"It's our",type:"video/mp4",category:3}],patners:[]}},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),i=n("Gu7T"),s=n.n(i),r=n("bOdI"),a=n.n(r),l=n("63pp"),c=(n("4L8C"),{name:"VideoPlayer",data:function(){var e;return e={timingConfig:n("BxMG"),player:null,advIndex:0,adverstsScope:[],patnersScope:[]},a()(e,"player",null),a()(e,"indexPlaying",0),a()(e,"indexCategory",3),a()(e,"advIteration",[]),e},mounted:function(){document.addEventListener("deviceready",this.inizializePlayer,!1)},beforeDestroy:function(){document.removeEventListener("deviceready",this.inizializePlayer)},methods:{storageMovies:function(){var e=this;return this.timingConfig.playLists.map(function(t){return{src:""+cordova.file.externalDataDirectory+e.getName(t.src),type:t.type,category:t.category}})},inizializePlayer:function(){var e=this,t=0,n=this.storageMovies();console.log(n),this.player=Object(l.a)("playerbook",{sources:n,autplay:!0});var o=this.player;document.getElementsByClassName("vjs-big-play-button")[0];this.player.children()[5].el_.addEventListener("click",function(){o.play(),console.log("to full screen?"),o.requestFullscreen()}),console.log(this.player.children()),console.log(this.player),this.player.on("ended",function(o){e.player.pause(),t++,e.indexCategory=n[t].category,e.player.src(n[t].src),console.log("set src: "+n[t].src),e.player.play()}),this.setupAdvertsVido()},getName:function(e){return e.substring(e.lastIndexOf("/")+1)},setupAdvertsVido:function(){var e=this;console.log("sort video adverts");var t=[];this.adverstsScope=this.timingConfig.adverst.map(function(n,o){console.log(n);var i=""+cordova.file.externalDataDirectory+e.getName(n.src);t[n.category]=void 0===t[n.category]?[{name:n.title,src:i}].concat():[].concat(s()(t[n.category]),[{name:n.title,src:i}])}),this.adverstsScope=t,t=[],this.timingConfig.patners.map(function(n,o){var i=""+cordova.file.externalDataDirectory+e.getName(n.src);console.log(n),t[n.category]=void 0===t[n.category]?[{name:n.title,src:i}].concat():[].concat(s()(t[n.category]),[{name:n.title,src:i}])}),this.patnersScope=t,console.log(this.adverstsScope),setInterval(function(){var t=void 0!==e.advIteration[e.indexCategory]?e.advIteration[e.indexCategory]:0;void 0!==e.adverstsScope[e.indexCategory][t].src&&(e.player.pause(),e.player.src(e.adverstsScope[e.indexCategory][t].src),e.player.play(),e.advIteration[e.indexCategory]++)},1e3*this.timingConfig.timeLine)}}}),d={render:function(){var e=this.$createElement;return(this._self._c||e)("video",{staticClass:"video-js",staticStyle:{width:"100%"},attrs:{height:"300",id:"playerbook",playsinline:"",controls:""}})},staticRenderFns:[]},u=n("VU/8")(c,d,!1,null,null,null).exports,p=n("//Fk"),v=n.n(p),h=n("mvHQ"),f=n.n(h),_=n("gRE1"),y=n.n(_),m=n("woOf"),g=n.n(m),w=n("5+rQ"),R=n.n(w);function L(e){return e.substring(e.lastIndexOf("/")+1)}var b={data:function(){return{timingConfig:n("BxMG"),downloadLinksScope:[],countCheckVideoUp:0,syncStatus:null}},mounted:function(){this.syncStatus=document.querySelector("#sync-status"),document.addEventListener("deviceready",this.downloadInizialize,!1)},beforeDestroy:function(){document.removeEventListener("deviceready",this.downloadInizialize)},methods:{downloadInizialize:function(){var e=this,t=this.timingConfig.playLists.map(function(e){return{src:e.src,type:e.type,title:e.title}});this.downloadLinksScope=g()([].concat(s()(this.downloadLinksScope),s()(t))),t=this.timingConfig.adverst.map(function(e){return{src:e.src,type:e.type,title:e.title}}),this.downloadLinksScope=g()([].concat(s()(this.downloadLinksScope),s()(t))),t=this.timingConfig.patners.map(function(e){return{src:e.src,type:e.type,title:e.title}}),this.downloadLinksScope=g()([].concat(s()(this.downloadLinksScope),s()(t))),console.log(this.downloadLinksScope),this.listDir(cordova.file.externalDataDirectory).then(function(t){var n=y()(t);for(var o in e.downloadLinksScope){var i=L(e.downloadLinksScope[o].src);n.includes(i)?(e.syncStatus.innerHTML+="Видео: "+e.downloadLinksScope[o].title+" - сущуствует <br/>",e.endSynchron(!0)):e.downloadFile(e.downloadLinksScope[o].src,e.downloadLinksScope[o].title)}})},downloadFile:function(e,t){var n=document.querySelector("#sync-status"),o=this.endSynchron;window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(i){var s=""+cordova.file.externalDataDirectory+L(e),r=new R.a;console.log("FilePath "+s),r.download(e,s,function(e){console.log("download complete: "+e.toURL()),n.innerHTML+="Видео: "+t+" - сохранено <br/>",o(!0)},function(e){n.innerHTML+="Видео: "+t+" - ошибка (проверьте сетевое подключение) <br/>",console.log("ErrorDownload: "+f()(e)),o(!0)},!0,{})})},listDir:function(e){return new v.a(function(t,n){window.resolveLocalFileSystemURL(e,function(e){e.createReader().readEntries(function(e){var n=e.map(function(e){return e.name});console.log(n),t(n)},function(e){n(e)})})})},getName:function(e){return e.substring(e.lastIndexOf("/")+1)},downloadSuccessCallback:function(){console.log("I'm returned")},downloadErrorCallback:function(e){console.log("Oshibochka "+e)},endSynchron:function(e){e&&this.countCheckVideoUp++;var t=this.downloadLinksScope.length;console.log("iteration: "+this.countCheckVideoUp+" length: "+this.downloadLinksScope.length),this.countCheckVideoUp==t&&(this.syncStatus.innerHTML="",this.$emit("sync",!0))}}},C=n("VU/8")(b,null,!1,null,null,null).exports,E={name:"App",components:{VideoPlayer:u,Downloader:C},data:function(){return{endSynchronizationCheck:!1}},methods:{endSynchronization:function(e){this.endSynchronizationCheck=e,console.log("SYNCHRONIZATION IS END: "+e+" ")}}},S={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"sync-status"}}),this._v(" "),this.endSynchronizationCheck?t("VideoPlayer"):this._e(),this._v(" "),t("Downloader",{on:{sync:this.endSynchronization}})],1)},staticRenderFns:[]};var N=n("VU/8")(E,S,!1,function(e){n("AVp0")},null,null).exports,O=n("/ocq"),I={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h1",[e._v(e._s(e.msg))]),e._v(" "),n("h2",[e._v("Essential Links")]),e._v(" "),e._m(0),e._v(" "),n("h2",[e._v("Ecosystem")]),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[e._v("\n        Core Docs\n      ")])]),e._v(" "),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[e._v("\n        Forum\n      ")])]),e._v(" "),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[e._v("\n        Community Chat\n      ")])]),e._v(" "),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[e._v("\n        Twitter\n      ")])]),e._v(" "),n("br"),e._v(" "),n("li",[n("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[e._v("\n        Docs for This Template\n      ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var k=n("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},I,!1,function(e){n("1uuo")},"data-v-d8ec41bc",null).exports;o.a.use(O.a);var T=new O.a({mode:"history",routes:[{path:"/d",name:"HelloWorld",component:k},{path:"/video.html",name:"VideoPlayer",component:u},{path:"/download",name:"Downloader",component:C}]});o.a.config.productionTip=!1,new o.a({el:"#app",router:T,components:{App:N},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.080aff90cb4e3bcc723a.js.map